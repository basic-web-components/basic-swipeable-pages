<!--
Let the user swipe horizontally with swipe gesture or mouse.
-->

<link rel="import" href="../basic-spread/basic-spread.html">

<polymer-element name="basic-swipeable-pages" extends="basic-spread">
<script>
Polymer({

  ready: function() {
    
    this.super();

    var containerStyle = this.$.spreadStack.style;
    containerStyle.touchAction = "pan-y";
    containerStyle.webkitTransition = "-webkit-transform 0.3s ease-out";
    containerStyle.transition = "transform 0.3s ease-out";

    PolymerGestures.addEventListener( this, "track", function( event ) {
      this._handleSwipe( event );
    }.bind( this ));
  },

  _handleSwipe: function( event ) {
    var containerStyle = this.$.spreadStack.style;
    var transform = containerStyle.transform;
    var match = /translateX\((-?\d+)px\)/.exec( transform );
    var x = match ? parseInt( match[1] ) : 0;
    console.log( x + " " + event.dx );
    x += event.dx;
    this.$.spreadStack.style.transform = "translateX(" + x + "px)";
  }

});
</script>
</polymer-element>
